{"version":3,"file":"events.min.js","mappings":"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","sources":["webpack://events/./events.js"],"sourcesContent":["async function requestMonth(target, month, year){\r\n    url.searchParams.set('month', month);\r\n    url.searchParams.set('yr', year);\r\n    window.history.pushState({}, '', url);\r\n\r\n    //hide all\r\n    document.querySelectorAll('#monthview .events-wrap:not(hidden)').forEach(el=>el.classList.add('hidden'));\r\n\r\n    let calendarPage   = document.querySelector(`.events-wrap[data-date=\"${year}-${month}\"]`);\r\n    if(calendarPage == null){\r\n        let wrapper = target.closest('.calendar-wrap');\r\n\r\n        Main.showLoader(wrapper.lastChild, false);\r\n\r\n        Main.adjustLoaderImageSize(wrapper.querySelector('.loader_wrapper'), 100);\r\n        \r\n        let formData = new FormData();\r\n        formData.append('month', month);\r\n        formData.append('year', year);\r\n\r\n        let response    = await FormSubmit.fetchRestApi('events/get_month_html', formData);\r\n        \r\n        if(response) {\r\n            target.closest('.calendar-wrap').querySelector('.loader').remove();\r\n            document.querySelector('#monthview').insertAdjacentHTML('beforeEnd', response);\r\n        }\r\n    }else{\r\n        calendarPage.classList.remove('hidden');\r\n    }\r\n\r\n    document.querySelector('div.month_selector .current').textContent = document.querySelector('select.month_selector').options[month-1].text;\r\n    document.querySelector('div.year_selector .current').textContent = year;\r\n}\r\n\r\nasync function requestWeek(target, wknr, year){\r\n    url.searchParams.set('yr', year);\r\n    url.searchParams.set('week', wknr);\r\n    window.history.pushState({}, '', url);\r\n\r\n    //hide all\r\n    document.querySelectorAll('#weekview .events-wrap:not(hidden)').forEach(el=>el.classList.add('hidden'));\r\n\r\n    let calendarPage   = document.querySelector(`.events-wrap[data-weeknr=\"${wknr}\"]`);\r\n    if(calendarPage == null){\r\n\r\n        let wrapper = target.closest('.calendar-wrap');\r\n\r\n        Main.showLoader(wrapper.lastChild, false);\r\n\r\n        Main.adjustLoaderImageSize(wrapper.querySelector('.loader_wrapper'), 100);\r\n        \r\n        let formData = new FormData();\r\n        formData.append('wknr',wknr);\r\n        formData.append('year',year);\r\n\r\n        let response    = await FormSubmit.fetchRestApi('events/get_week_html', formData);\r\n        \r\n        if(response) {\r\n            target.closest('.calendar-wrap').querySelector('.loader').remove();\r\n            document.querySelector('#weekview').insertAdjacentHTML('beforeEnd',response);\r\n        }\r\n    }else{\r\n        calendarPage.classList.remove('hidden');\r\n    }\r\n\r\n    document.querySelector('div.week_selector .current').textContent = wknr;\r\n    document.querySelector('div.year_selector .current').textContent = year;\r\n}\r\n\r\nasync function requestExpandList(offset, month='', year=''){\r\n    //remove any existing element when requesting specific date\r\n    if(month != '' || year != ''){\r\n        document.querySelectorAll('#listview article').forEach(el=>el.remove());\r\n\r\n        url.searchParams.set('yr', year);\r\n        url.searchParams.set('month', month);\r\n        window.history.pushState({}, '', url);\r\n    }\r\n\r\n    Main.showLoader(document.getElementById('listview').lastChild, false, 100);\r\n    \r\n    let formData = new FormData();\r\n    formData.append('offset',offset);\r\n    formData.append('month',month);\r\n    formData.append('year',year);\r\n    \r\n    let response    = await FormSubmit.fetchRestApi('events/get_list_html', formData);\r\n        \r\n    if(response) {\r\n        document.querySelector('#listview').querySelector('.loader').remove();\r\n        document.querySelector('#listview').insertAdjacentHTML('beforeEnd', response);\r\n    }\r\n}                                                    \r\n                                                                           \r\nfunction handleTouchStart(evt) {\r\n    const firstTouch = evt.touches[0];                                      \r\n    xDown = firstTouch.clientX;                                      \r\n    yDown = firstTouch.clientY;                                      \r\n}                                              \r\n                                                                           \r\nfunction handleTouchMove(evt) {\r\n    if ( ! xDown || ! yDown ) {\r\n        return;\r\n    }\r\n\r\n    let target;\r\n\r\n    let xUp = evt.touches[0].clientX;                                    \r\n    let yUp = evt.touches[0].clientY;\r\n\r\n    let xDiff = xDown - xUp;\r\n    let yDiff = yDown - yUp;\r\n                                                                        \r\n    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {\r\n        let selected_view   = document.querySelector('.viewselector.selected').dataset.type;\r\n\r\n        if ( xDiff > 0 ) {\r\n            /* right swipe */\r\n            target  = evt.target.closest('.events-wrap').querySelector('.next a');\r\n        } else {\r\n            /* left swipe */\r\n            target  = evt.target.closest('.events-wrap').querySelector('.prev a');\r\n        }\r\n        let month = target.dataset.month;\r\n        let week  = target.dataset.weeknr;\r\n        let year  = target.dataset.year;\r\n        \r\n        if(selected_view == 'weekview'){\r\n            requestWeek(evt.target, week, year);\r\n        }else if(selected_view == 'monthview'){\r\n            requestMonth(target, month, year);\r\n        }\r\n    }\r\n    /* reset values */\r\n    xDown = null;\r\n    yDown = null;                                             \r\n}\r\n\r\nconst url = new URL(window.location);\r\nvar xDown = null;                                                        \r\nvar yDown = null;\r\n\r\nconsole.log(\"Events.js loaded\");\r\n\r\nfunction prevNext(target){\r\n    let requestedMonth = target.dataset.month;\r\n    let requestedWeek  = target.dataset.weeknr;\r\n    let requestedYear  = target.dataset.year;\r\n\r\n    if(requestedMonth != null){\r\n        requestMonth(target, requestedMonth, requestedYear);\r\n    }else if(requestedWeek != null){\r\n        requestWeek(target, requestedWeek, requestedYear);\r\n    }\r\n}\r\n\r\nfunction calendarDayClicked(target){\r\n    let date    = target.dataset.date;\r\n\r\n    //hide events of all days\r\n    document.querySelectorAll('.event-details-wrapper:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n    \r\n    //show the events of this day\r\n    let details = target.closest('.events-wrap').querySelector(`.event-details-wrapper[data-date=\"${date}\"]`);\r\n    details.classList.remove('hidden');\r\n\r\n    //unselect previous slected date\r\n    document.querySelectorAll('.calendar-day.selected').forEach(el=>el.classList.remove('selected'));\r\n\r\n    //make this date selected\r\n    target.classList.add('selected');\r\n\r\n    // scroll to the event\r\n    details.scrollIntoView({behavior:'auto', block:'start', inline:'center'});\r\n}\r\n\r\nfunction hourClicked(target){\r\n    let date        = target.dataset.date;\r\n    let startTime   = target.dataset.starttime;\r\n\r\n    //hide all other events\r\n    document.querySelectorAll('.event-details-wrapper:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n    \r\n    //show the event\r\n    let eventDetail = target.closest('.events-wrap').querySelector(`.event-details-wrapper[data-date=\"${date}\"][data-starttime=\"${startTime}\"]`);\r\n    if(eventDetail == null){\r\n        target.closest('.events-wrap').querySelector('.event-details-wrapper[data-date=\"empty\"]').classList.remove('hidden');\r\n    }else{\r\n        eventDetail.classList.remove('hidden');\r\n\r\n        //unselect previous selected date\r\n        document.querySelectorAll('.calendar-hour.selected').forEach(el=>el.classList.remove('selected'));\r\n        //make this date selected\r\n        target.classList.add('selected');\r\n\r\n        if(Main.isMobileDevice()){\r\n            window.scrollTo(0, eventDetail.offsetTop);\r\n            \r\n\t\t    console.log('scrolling')\r\n        }else{\r\n            //scroll the detail into view\r\n            eventDetail.scrollIntoView({behavior:'auto', block:'start', inline:'center'});\r\n            \r\n            // make sure the vertical scroll is ok too\r\n            window.scrollTo(0, eventDetail.offsetHeight);\r\n            \r\n\t\tconsole.log('scrolling')\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction viewChanged(target){\r\n    let parent  = target.closest('.search-form');\r\n    if(target.dataset.type  == 'weekview' || target.dataset.type  == 'monthview'){\r\n        parent.querySelector('div.week_selector').classList.toggle('hidden');\r\n        parent.querySelector('div.month_selector').classList.toggle('hidden');\r\n    }\r\n\r\n    //select class\r\n    document.querySelectorAll('.viewselector.selected').forEach(el=>el.classList.remove('selected'));\r\n    target.classList.add('selected');\r\n\r\n    //show view\r\n    document.querySelectorAll('.calendarview').forEach(el=>el.classList.add('hidden'));\r\n    document.getElementById(target.dataset.type).classList.remove('hidden');\r\n\r\n    //change url\r\n    url.searchParams.set('view', target.dataset.type.replace('view',''));\r\n    window.history.pushState({}, '', url);\r\n}\r\n\r\ndocument.addEventListener(\"click\", function(event) {\r\n\tlet target = event.target;\r\n    if(target.classList.contains('prevnext')){\r\n        prevNext(target);\r\n    }\r\n\r\n    if(target.classList.contains('calendar-day')){\r\n        event.stopPropagation();\r\n\r\n        calendarDayClicked(target)\r\n    }\r\n\r\n    if(target.classList.contains('calendar-hour')){\r\n        event.stopPropagation();\r\n        hourClicked(target);\r\n    }\r\n\r\n    if(target.classList.contains('viewselector')){\r\n        event.stopPropagation();\r\n        viewChanged(target);\r\n    }\r\n\r\n    if(target.id=='add_calendar'){\r\n        document.getElementById('calendaraddingoptions').classList.toggle('hidden');   \r\n    }\r\n    \r\n    if(target.classList.contains('calendarurl')){\r\n        event.stopPropagation();\r\n        if(target.textContent != ''){\r\n            navigator.clipboard.writeText(target.textContent);\r\n            let options = {\r\n                icon: 'success',\r\n                title: 'Copied '+target.textContent,\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            };\r\n\r\n            if(document.fullscreenElement != null){\r\n                options['target']\t= document.fullscreenElement;\r\n            }\r\n\r\n            Swal.fire(options);\r\n        }\r\n    }\r\n});\r\n\r\ndocument.addEventListener(\"change\", function(event) {\r\n\tlet target = event.target;\r\n    if(target.classList.contains('week_selector')){\r\n        event.stopPropagation();\r\n\r\n        let year    = target.closest('.date-search').querySelector('.year_selector').value;\r\n        if(document.querySelector('.viewselector.selected').dataset.type=='weekview'){\r\n            requestWeek(target, target.value, year);\r\n        }else if(document.querySelector('.viewselector.selected').dataset.type=='listview'){\r\n            requestExpandList(0,target.value,year);\r\n        }\r\n\r\n        //change url\r\n        url.searchParams.set('week', target.value);\r\n    }\r\n\r\n    if(target.classList.contains('month_selector')){\r\n        event.stopPropagation();\r\n\r\n        let year    = target.closest('.date-search').querySelector('.year_selector').value;\r\n        if(document.querySelector('.viewselector.selected').dataset.type=='monthview'){\r\n            requestMonth(target, target.value, year);\r\n        }else if(document.querySelector('.viewselector.selected').dataset.type=='listview'){\r\n            requestExpandList(0,target.value, year);\r\n        }\r\n        url.searchParams.set('month', target.value);\r\n    }\r\n\r\n    if(target.classList.contains('year_selector')){\r\n        event.stopPropagation();\r\n        \r\n        let month   = target.closest('.date-search').querySelector('.month_selector').value;\r\n        if(document.querySelector('.viewselector.selected').dataset.type=='monthview'){\r\n            requestMonth(target, month, target.value);\r\n        }else if(document.querySelector('.viewselector.selected').dataset.type=='listview'){\r\n            requestExpandList(0,month, target.value);\r\n        }else if(document.querySelector('.viewselector.selected').dataset.type=='weekview'){\r\n            let wknr  = target.closest('.date-search').querySelector('.week_selector').value;\r\n            requestWeek(target, wknr, target.value);\r\n        }\r\n        url.searchParams.set('yr', target.value);\r\n    }\r\n    \r\n    window.history.pushState({}, '', url);\r\n});\r\n\r\nwindow.onscroll = function() {\r\n    let d       = document.documentElement;\r\n    let offset  = d.scrollTop + window.innerHeight;\r\n    let height  = d.offsetHeight;\r\n  \r\n    //if we scrolled to the bottom of the page and the list view is actve, and we are not currently loading, load more\r\n    if (offset >= height-2 && document.querySelector('.viewselector.selected').dataset.type=='listview' && document.querySelector('#listview .loader') == null) {\r\n        let skipcount  = document.querySelector(\"#listview\").querySelectorAll('article').length;\r\n\r\n        requestExpandList(skipcount);\r\n    }\r\n};\r\n\r\ndocument.addEventListener('touchstart', handleTouchStart);        \r\ndocument.addEventListener('touchmove', handleTouchMove);"],"names":["async","requestMonth","target","month","year","url","searchParams","set","window","history","pushState","document","querySelectorAll","forEach","el","classList","add","calendarPage","querySelector","wrapper","closest","Main","showLoader","lastChild","adjustLoaderImageSize","formData","FormData","append","response","FormSubmit","fetchRestApi","remove","insertAdjacentHTML","textContent","options","text","requestWeek","wknr","requestExpandList","offset","getElementById","URL","location","xDown","yDown","console","log","addEventListener","event","contains","requestedMonth","dataset","requestedWeek","weeknr","requestedYear","prevNext","stopPropagation","date","details","scrollIntoView","behavior","block","inline","calendarDayClicked","startTime","starttime","eventDetail","isMobileDevice","scrollTo","offsetTop","offsetHeight","hourClicked","parent","type","toggle","replace","viewChanged","id","navigator","clipboard","writeText","icon","title","showConfirmButton","timer","fullscreenElement","Swal","fire","value","onscroll","d","documentElement","scrollTop","innerHeight","length","evt","firstTouch","touches","clientX","clientY","xUp","yUp","xDiff","yDiff","Math","abs","selected_view","week"],"sourceRoot":""}