{"version":3,"file":"mobile-schedule.min.js","mappings":"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","sources":["webpack://events/./schedules/shared.js","webpack://events/./schedules/mobile.js"],"sourcesContent":["//shows the modal to select a user as host\r\nexport function showAddHostModal(target, date='', startTime=''){\r\n\ttarget.classList.add('active');\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add-host\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\" class=\"no-reset\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n    modal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n    modal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule-id\"]').value\t= target.closest('.schedules-div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add current user as host\r\nexport async function addCurrentUserAsHost(target, dateStr){\r\n    let scheduleOwner\t= target.closest('.schedules-div').dataset.target;   \r\n\tlet text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tlet confirmed\t\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\r\n\t\tlet formData\t\t= loadHostFormdata(target);\r\n\r\n\t\tif(target.closest('table') == null){\r\n\t\t\tMain.showLoader(target);\r\n\t\t}else{\r\n\t\t\ttarget.innerHTML = '<span></span>';\r\n\t\t\tMain.showLoader(target.querySelector('span'));\r\n\t\t}\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nexport function addHostHtml(response){\r\n\tlet target\t\t\t= document.querySelector('.active');\r\n\r\n\tif(target != null){\r\n\t\ttarget.classList.remove('active');\r\n\t\ttarget.outerHTML\t= response.html;\r\n\t}\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Remove a host\r\nexport async function removeHost(target, dateStr){\r\n\tlet text, confirmed;\r\n\r\n    let scheduleOwner\t= target.closest('.schedules-div').dataset.target;\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tconfirmed\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\t\t\r\n\t\tlet formData\t\t= new FormData();\r\n\t\tformData.append('session-id', target.dataset.sessionId);\r\n\t\tMain.showLoader(target.firstChild);\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\treturn response.html;\r\n\t}\r\n\r\n    return confirmed;\r\n}\r\n\r\nexport function showTimeslotModal(selected=''){\r\n\tlet reminders, firstCell, lastCell, date, startTime, endTime, hostId, oldTime, subject, location, hostName, eventId, sessionId, atendees, li, html, option;\r\n\tlet modal \t\t= document.querySelector('[name=\"add-session\"]');\r\n\tlet ul\t\t\t= modal.querySelector('ul.list-selection-list');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\" class=\"no-reset\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\tif(ul != null){\r\n\t\tul.innerHTML\t= '';\r\n\t}\r\n\r\n\tif(selected[0] == undefined){\r\n\t\tfirstCell\t= selected;\r\n\t\tlastCell\t= firstCell;\r\n\t\tstartTime\t= firstCell.dataset.starttime;\r\n\t\tendTime\t\t= firstCell.dataset.endtime;\r\n\t}else{\r\n\t\tfirstCell\t\t= selected[0].node;\r\n\t\tlastCell\t\t= selected[selected.length-1].node;\r\n\t\tlet rowCount\t= document.querySelectorAll('.ui-selected').length;\r\n\t\tapplyRowSpan(firstCell, rowCount);\r\n\r\n\t\t// Only show loader when the cell is empty\r\n\t\tif(!firstCell.matches('.selected')){\r\n\t\t\tMain.showLoader(firstCell.firstChild);\r\n\t\t}\r\n\t}\r\n\tmodal.querySelector('[name=\"schedule-id\"]').value\t\t= firstCell.closest('.schedules-div').dataset.id;\r\n\t\r\n\tlet table\t= firstCell.closest('table');\r\n\tstartTime\t= firstCell.dataset.starttime;\r\n\tendTime\t\t= firstCell.dataset.endtime;\r\n\tdate\t \t= firstCell.dataset.isodate;\r\n\tif(firstCell.closest('tr') != null){\r\n\t\tstartTime\t= firstCell.closest('tr').dataset.starttime;\r\n\t\tendTime\t\t= lastCell.closest('tr').dataset.endtime;\r\n\t\tdate\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\thostId\t\t\t= firstCell.dataset.hostId;\r\n\t//oldTime\t\t\t= firstCell.dataset.oldTime;\r\n\tsubject\t\t\t= firstCell.dataset.subject;\r\n\tlocation\t\t= firstCell.dataset.location;\r\n\thostName\t\t= firstCell.dataset.host;\r\n\tsessionId\t\t= firstCell.dataset.sessionId;\r\n\tif(firstCell.dataset.reminders != undefined){\r\n\t\treminders\t\t= JSON.parse(firstCell.dataset.reminders);\r\n\r\n\t\tmodal.querySelectorAll('[name=\"reminders[]\"]').forEach(el => {\r\n\t\t\tif(reminders.includes(el.value)){\r\n\t\t\t\tel.checked\t= true;\r\n\t\t\t}else{\r\n\t\t\t\tel.checked\t= false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tif(firstCell.dataset.atendees != undefined){\r\n\t\tatendees\t\t= JSON.parse(firstCell.dataset.atendees);\r\n\t}\r\n\t\r\n\tif(firstCell.closest('.day-wrapper-mobile') != null){\r\n\t\tfirstCell.closest('.day-wrapper-mobile').classList.add('active');\r\n\t}else{\r\n\t\tfirstCell.classList.add('active');\r\n\t}\r\n\r\n\t//Fill the modal values\r\n\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\r\n\tif(firstCell.closest('.schedules-div.table-wrapper').dataset.fixedslotsize == '1' ){\r\n\t\tmodal.querySelector('[name=\"endtime\"]').closest('label').querySelector('h4').textContent = 'End time';\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= true;\r\n\t}else{\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= false;\r\n\t\tmodal.querySelector('[name=\"endtime\"]').closest('label').querySelector('h4').textContent = 'Select an end time:'\r\n\t}\r\n\t\r\n\tif(firstCell.closest('.schedules-div.table-wrapper').dataset.subject == '' || firstCell.closest('.schedules-div.table-wrapper').dataset.subject == undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= '';\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= false;\r\n\t}else{\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= firstCell.closest('.schedules-div.table-wrapper').dataset.subject;\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= true;\r\n\t}\r\n\r\n\tmodal.querySelector('[name=\"add-timeslot\"]').classList.remove('add_schedule_row');\r\n\tmodal.querySelector('[name=\"add-timeslot\"]').classList.add('update_schedule');\r\n\r\n\tif(sessionId != undefined){\r\n\t\tmodal.querySelector('[name=\"session-id\"]').value\t= sessionId;\r\n\t}\r\n\tif(hostId\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host-id\"]').value\t\t= hostId;\r\n\r\n\t}\r\n\tif(subject\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= subject;\r\n\t}\r\n\tif(location\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"location\"]').value\t\t= location;\r\n\t}\r\n\tif(hostName\t!= undefined){\r\n\t\tmodal.querySelector('#host').value\t\t\t\t\t= hostName;\r\n\t}\r\n\tif(atendees != undefined){\r\n\t\tatendees.forEach(atendee => {\r\n\t\t\tli\t \t\t= document.createElement('li');\r\n\t\t\tli.classList.add('list-selection');\r\n\r\n\t\t\thtml\t= `<button type=\"button\" class=\"small remove-list-selection\"><span class='remove-list-selection'>×</span></button>`;\r\n\r\n\t\t\tif(typeof(atendee) === 'object'){\r\n\t\t\t\thtml   += `<input type='hidden' class='no-reset' class='no-reset' name='others[]' value='${atendee.id}'>`;\r\n\t\t\t\thtml   += `<span>${atendee.name}</span>`;\r\n\t\t\t}else{\r\n\t\t\t\thtml   += `<span>`;\r\n\t\t\t\t\thtml   += `<input type='text' name='others[]' value='${atendee}' readonly=readonly style='width:${atendee.length}ch'>`;\r\n\t\t\t\thtml   += `</span>`;\r\n\t\t\t}\r\n\r\n\t\t\tli.innerHTML\t= html;\r\n\r\n\t\t\tul.appendChild(li);\r\n\t\t});\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nexport async function editTimeSlot(target, date){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(target, date, target.dataset.starttime, target.dataset.endtime);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add-session\"]');\r\n\t\tmodal.querySelector('[name=\"add-timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\treturn answer.isDenied;\r\n\t}\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n    let scheduleId\t\t= target.closest('.schedules-div').dataset.id;\r\n\tlet table\t\t\t= target.closest('table');\r\n\r\n\tlet heading, cell, date, startTime, host;\r\n\r\n\tif(table == null){\r\n\t\tstartTime\t\t= target.dataset.starttime;\r\n\t\thost\t\t\t= target.dataset.hostId;\r\n\t\tdate\t\t\t= target.dataset.isodate\r\n\t}else{\r\n\t\theading\t\t\t= table.tHead.rows[0];\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tstartTime\t\t= target.closest('tr').dataset.starttime;\r\n\t\thost\t\t\t= cell.dataset.host;\r\n\t\tdate\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date', date);\r\n\tif(host != null){\r\n\t\tformData.append('host-id', host);\r\n\t}else{\r\n\t\tformData.append('host-id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule-id', scheduleId);\r\n\r\n\tformData.append('subject', target.closest('.schedules-div.table-wrapper').dataset.subject)\r\n\r\n\treturn formData;\r\n}\r\n\r\nexport async function checkConfirmation(text, target){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target.firstChild);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n\r\nexport function applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}","import { addCurrentUserAsHost, removeHost, editTimeSlot, addHostHtml, showTimeslotModal } from './shared.js';\r\n\r\nconsole.log(\"Mobile-schedule.js loaded\");\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target, multiple=false){\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\tif(multiple){\r\n\t\t\tdocument.querySelectorAll('.active').forEach(el=>{\r\n\t\t\t\tel.classList.remove('active');\r\n\t\t\t\tel.outerHTML\t= response.html[el.dataset.isodate];\r\n\t\t\t});\r\n\r\n\t\t\tMain.displayMessage(response.message);\r\n\r\n\t\t\tMain.hideModals();\r\n\t\t}else{\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\t}\r\n\r\n    Main.hideModals();\r\n}\r\n\r\ndocument.addEventListener('click', async function(event){\r\n    let target = event.target;\r\n\r\n    if(target.closest('.add-me-as-host') != null){\r\n        target  = target.closest('.add-me-as-host');\r\n        target.closest('.day-wrapper-mobile').classList.add('active');\r\n\t\taddCurrentUserAsHost(target.closest('.add-me-as-host'), target.dataset.date);\r\n\t}else if(target.closest('.remove-host-mobile') != null){\r\n\t\tevent.stopPropagation();\r\n        target      \t\t= target.closest('.remove-host-mobile');\r\n        let sessionWrapper\t= target.closest('.session-wrapper-mobile');\r\n\t\tlet dayWrapper\t\t= sessionWrapper.closest('.day-wrapper-mobile');\r\n\t\tlet isMeal\t\t\t= sessionWrapper.matches('.meal');\r\n\r\n\t\tlet result = await removeHost(target, target.dataset.date);\r\n\r\n        if(result){\r\n\t\t\tif(isMeal){\r\n\t\t\t\tdayWrapper.outerHTML\t= result;\r\n\t\t\t}else{\r\n            \tsessionWrapper.remove();\r\n\t\t\t}\r\n        }\r\n\t}else if (target.name == 'add-host-mobile' ){\r\n\t\tevent.stopPropagation();\r\n\t\taddHost(target, true)\r\n\t}else if(target.closest('.edit-session-mobile') != null){\r\n        target  = target.closest('.edit-session-mobile');\r\n\r\n\t\tlet dayWrapper\t= target.closest('.day-wrapper-mobile');\r\n\r\n        dayWrapper.classList.add('active');\r\n\r\n\t\tlet wrapper\t= target.closest('.session-wrapper-mobile');\r\n\r\n\t\tlet result = await editTimeSlot(target, target.dataset.isodate, target.dataset.date);\r\n\r\n        if(result){\r\n\t\t\tremoveHost(wrapper, target.dataset.date)\r\n\r\n            wrapper.remove();\r\n        }\r\n\t}else if(target.name == 'add-host' || target.name == 'add-timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}else if(target.name == 'add-session'){\r\n\t\tevent.stopPropagation();\r\n\t\tshowTimeslotModal(target);\r\n\t}else if(target.name == 'add-host'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tMain.showModal(target.closest('.schedules-div').querySelector('.add-host-mobile-wrapper'));\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\tlet target = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name == 'starttime' && target.type == 'radio'){\r\n\t\tif(target.value == '12:00'){\r\n\t\t\ttarget.closest('form').querySelector('.lunch.select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.diner.select-wrapper').classList.add('hidden');\r\n\t\t}else{\r\n\t\t\ttarget.closest('form').querySelector('.diner.select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.lunch.select-wrapper').classList.add('hidden');\r\n\t\t}\r\n\t}else if(target.matches('.schedules-wrapper [name=\"add-session\"] [name=\"date\"]')){\r\n\t\t// Add the active class to the currently selected date\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet scheduleId\t= form.querySelector('[name=\"schedule-id\"').value;\r\n\r\n\t\tform.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\r\n\r\n\t\tlet dayWrapper\t= document.querySelector(`.schedules-div[data-id='${scheduleId}'] .day-wrapper-mobile[data-isodate='${target.value}']`);\r\n\r\n\t\tif(dayWrapper != null){\r\n\t\t\tdayWrapper.classList.add('active');\r\n\t\t}\r\n\t}else if(target.matches('.add-host-mobile-wrapper [name=\"date[]\"]')){\r\n\t\t// Add the active class to the currently selected dates\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet scheduleId\t= form.querySelector('[name=\"schedule-id\"').value;\r\n\r\n\t\tform.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\r\n\r\n\t\tform.querySelectorAll('[name=\"date[]\"]:checked ').forEach(el=>{\r\n\t\t\tlet dayWrapper\t= document.querySelector(`.schedules-div[data-id='${scheduleId}'] .day-wrapper-mobile[data-isodate='${el.value}']`);\r\n\r\n\t\t\tif(dayWrapper != null){\r\n\t\t\t\tdayWrapper.classList.add('active');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});"],"names":["addHostHtml","response","target","document","querySelector","classList","remove","outerHTML","html","Main","displayMessage","message","hideModals","async","removeHost","dateStr","text","confirmed","scheduleOwner","closest","dataset","contains","checkConfirmation","firstChild","formData","FormData","append","sessionId","showLoader","FormSubmit","fetchRestApi","showTimeslotModal","selected","reminders","firstCell","lastCell","date","startTime","endTime","hostId","subject","location","hostName","atendees","li","modal","ul","querySelectorAll","forEach","el","value","innerHTML","undefined","starttime","endtime","node","length","count","row","index","cellIndex","i","nextElementSibling","cells","add","rowSpan","applyRowSpan","matches","id","table","isodate","rows","host","JSON","parse","includes","checked","fixedslotsize","textContent","disabled","atendee","createElement","name","appendChild","showModal","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","fullscreenElement","Swal","fire","isConfirmed","addHost","multiple","submitForm","console","log","addEventListener","event","heading","cell","scheduleId","tHead","sim","userId","loadHostFormdata","addCurrentUserAsHost","stopPropagation","sessionWrapper","dayWrapper","isMeal","result","wrapper","showDenyButton","denyButtonText","answer","isDenied","editTimeSlot","type","form"],"sourceRoot":""}