{"version":3,"file":"desktop-schedule.min.js","mappings":"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","sources":["webpack://events/./schedules/shared.js","webpack://events/./schedules/desktop.js"],"sourcesContent":["//shows the modal to select a user as host\r\nexport function showAddHostModal(target, date='', startTime=''){\r\n\ttarget.classList.add('active');\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add_host\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n    modal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n    modal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t= target.closest('.schedules-div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add current user as host\r\nexport async function addCurrentUserAsHost(target, dateStr){\r\n    let scheduleOwner\t= target.closest('.schedules-div').dataset.target;   \r\n\tlet text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tlet confirmed\t\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\r\n\t\tlet formData\t\t= loadHostFormdata(target);\r\n\r\n\t\tif(target.closest('table') == null){\r\n\t\t\tMain.showLoader(target);\r\n\t\t}else{\r\n\t\t\ttarget.innerHTML = '<span></span>';\r\n\t\t\tMain.showLoader(target.querySelector('span'));\r\n\t\t}\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nexport function addHostHtml(response){\r\n\tlet target\t\t\t= document.querySelector('.active');\r\n\r\n\tif(target != null){\r\n\t\ttarget.classList.remove('active');\r\n\t\ttarget.outerHTML\t= response.html;\r\n\t}\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Remove a host\r\nexport async function removeHost(target, dateStr){\r\n\tlet text, confirmed;\r\n\r\n    let scheduleOwner\t= target.closest('.schedules-div').dataset.target;\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tconfirmed\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\t\t\r\n\t\tlet formData\t\t= new FormData();\r\n\t\tformData.append('session_id', target.dataset.session_id);\r\n\t\tMain.showLoader(target.firstChild);\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\treturn response.html;\r\n\t}\r\n\r\n    return confirmed;\r\n}\r\n\r\nexport function showTimeslotModal(selected=''){\r\n\tlet reminders, firstCell, lastCell, date, startTime, endTime, hostId, oldTime, subject, location, hostName, eventId, sessionId, atendees, li, html, option;\r\n\tlet modal \t\t= document.querySelector('[name=\"add_session\"]');\r\n\tlet ul\t\t\t= modal.querySelector('ul.listselectionlist');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\tif(ul != null){\r\n\t\tul.innerHTML\t= '';\r\n\t}\r\n\r\n\tif(selected[0] == undefined){\r\n\t\tfirstCell\t= selected;\r\n\t\tlastCell\t= firstCell;\r\n\t\tstartTime\t= firstCell.dataset.starttime;\r\n\t\tendTime\t\t= firstCell.dataset.endtime;\r\n\t}else{\r\n\t\tfirstCell\t\t= selected[0].node;\r\n\t\tlastCell\t\t= selected[selected.length-1].node;\r\n\t\tlet rowCount\t= document.querySelectorAll('.ui-selected').length;\r\n\t\tapplyRowSpan(firstCell, rowCount);\r\n\r\n\t\t// Only show loader when the cell is empty\r\n\t\tif(!firstCell.matches('.selected')){\r\n\t\t\tMain.showLoader(firstCell.firstChild);\r\n\t\t}\r\n\t}\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t\t= firstCell.closest('.schedules-div').dataset.id;\r\n\t\r\n\tlet table\t= firstCell.closest('table');\r\n\tstartTime\t= firstCell.dataset.starttime;\r\n\tendTime\t\t= firstCell.dataset.endtime;\r\n\tdate\t \t= firstCell.dataset.isodate;\r\n\tif(firstCell.closest('tr') != null){\r\n\t\tstartTime\t= firstCell.closest('tr').dataset.starttime;\r\n\t\tendTime\t\t= lastCell.closest('tr').dataset.endtime;\r\n\t\tdate\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\thostId\t\t\t= firstCell.dataset.host_id;\r\n\t//oldTime\t\t\t= firstCell.dataset.old_time;\r\n\tsubject\t\t\t= firstCell.dataset.subject;\r\n\tlocation\t\t= firstCell.dataset.location;\r\n\thostName\t\t= firstCell.dataset.host;\r\n\tsessionId\t\t= firstCell.dataset.session_id;\r\n\tif(firstCell.dataset.reminders != undefined){\r\n\t\treminders\t\t= JSON.parse(firstCell.dataset.reminders);\r\n\r\n\t\tmodal.querySelectorAll('[name=\"reminders[]\"]').forEach(el => {\r\n\t\t\tif(reminders.includes(el.value)){\r\n\t\t\t\tel.checked\t= true;\r\n\t\t\t}else{\r\n\t\t\t\tel.checked\t= false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tif(firstCell.dataset.atendees != undefined){\r\n\t\tatendees\t\t= JSON.parse(firstCell.dataset.atendees);\r\n\t}\r\n\t\r\n\tif(firstCell.closest('.day-wrapper-mobile') != null){\r\n\t\tfirstCell.closest('.day-wrapper-mobile').classList.add('active');\r\n\t}else{\r\n\t\tfirstCell.classList.add('active');\r\n\t}\r\n\r\n\t//Fill the modal values\r\n\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\r\n\tif(firstCell.closest('.schedules-div.table-wrapper').dataset.fixedslotsize == '1' ){\r\n\t\tmodal.querySelector('[name=\"endtime\"]').closest('label').querySelector('h4').textContent = 'End time';\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= true;\r\n\t}else{\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= false;\r\n\t\tmodal.querySelector('[name=\"endtime\"]').closest('label').querySelector('h4').textContent = 'Select an end time:'\r\n\t}\r\n\t\r\n\tif(firstCell.closest('.schedules-div.table-wrapper').dataset.subject == '' || firstCell.closest('.schedules-div.table-wrapper').dataset.subject == undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= '';\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= false;\r\n\t}else{\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= firstCell.closest('.schedules-div.table-wrapper').dataset.subject;\r\n\t\tmodal.querySelector('[name=\"endtime\"]').disabled\t= true;\r\n\t}\r\n\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.remove('add_schedule_row');\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.add('update_schedule');\r\n\r\n\tif(sessionId != undefined){\r\n\t\tmodal.querySelector('[name=\"session-id\"]').value\t= sessionId;\r\n\t}\r\n\tif(hostId\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host_id\"]').value\t\t= hostId;\r\n\r\n\t}\r\n\tif(subject\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= subject;\r\n\t}\r\n\tif(location\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"location\"]').value\t\t= location;\r\n\t}\r\n\tif(hostName\t!= undefined){\r\n\t\tmodal.querySelector('#host').value\t\t\t\t\t= hostName;\r\n\t}\r\n\tif(atendees != undefined){\r\n\t\tatendees.forEach(atendee => {\r\n\t\t\tli\t \t\t= document.createElement('li');\r\n\t\t\tli.classList.add('listselection');\r\n\r\n\t\t\thtml\t= `<button type=\"button\" class=\"small remove-list-selection\"><span class='remove-list-selection'>×</span></button>`;\r\n\r\n\t\t\tif(typeof(atendee) === 'object'){\r\n\t\t\t\thtml   += `<input type='hidden' name='others[]' value='${atendee.id}'>`;\r\n\t\t\t\thtml   += `<span>${atendee.name}</span>`;\r\n\t\t\t}else{\r\n\t\t\t\thtml   += `<span>`;\r\n\t\t\t\t\thtml   += `<input type='text' name='others[]' value='${atendee}' readonly=readonly style='width:${atendee.length}ch'>`;\r\n\t\t\t\thtml   += `</span>`;\r\n\t\t\t}\r\n\r\n\t\t\tli.innerHTML\t= html;\r\n\r\n\t\t\tul.appendChild(li);\r\n\t\t});\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nexport async function editTimeSlot(target, date){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(target, date, target.dataset.starttime, target.dataset.endtime);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\treturn answer.isDenied;\r\n\t}\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n    let scheduleId\t\t= target.closest('.schedules-div').dataset.id;\r\n\tlet table\t\t\t= target.closest('table');\r\n\r\n\tlet heading, cell, date, startTime, host;\r\n\r\n\tif(table == null){\r\n\t\tstartTime\t\t= target.dataset.starttime;\r\n\t\thost\t\t\t= target.dataset.host_id;\r\n\t\tdate\t\t\t= target.dataset.isodate\r\n\t}else{\r\n\t\theading\t\t\t= table.tHead.rows[0];\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tstartTime\t\t= target.closest('tr').dataset.starttime;\r\n\t\thost\t\t\t= cell.dataset.host;\r\n\t\tdate\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date', date);\r\n\tif(host != null){\r\n\t\tformData.append('host_id', host);\r\n\t}else{\r\n\t\tformData.append('host_id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tformData.append('subject', target.closest('.schedules-div.table-wrapper').dataset.subject)\r\n\r\n\treturn formData;\r\n}\r\n\r\nexport async function checkConfirmation(text, target){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target.firstChild);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n\r\nexport function applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}","import { applyRowSpan, showAddHostModal, addCurrentUserAsHost, addHostHtml, removeHost, showTimeslotModal, checkConfirmation, editTimeSlot } from './shared.js';\r\n\r\nconsole.log(\"Desktop-schedule.js loaded\");\r\n\r\n/**\r\n *\r\n * Submits the new schedule form via rest API and adds the new schedule to the screen.\r\n *\r\n * @listens to button click if button has name add_schedule\r\n *\r\n * @param {Object} target     The clicked button.\r\n *\r\n * @return nothing\r\n*/ \r\nasync function addSchedule(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_schedule');\r\n\r\n\tMain.hideModals();\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.schedules_wrapper').outerHTML=response.html;\r\n\t\t\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\taddSelectable();\r\n\t}\r\n}\r\n\r\nfunction ShowPublishScheduleModal(target){\r\n\tvar modal\t\t\t= target.closest('.schedules-div').querySelector('.publish-schedule');\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value = target.dataset[\"schedule_id\"];\r\n\tif(target.dataset.target != null){\r\n\t\tmodal.querySelector('[name=\"schedule_target\"]').value = target.dataset.target;\r\n\t\tmodal.querySelector('[name=\"publish-schedule\"]').click();\r\n\t\tMain.showLoader(target,true);\r\n\t}else{\r\n\t\tMain.showModal(modal);\r\n\t}\r\n}\r\n\r\nasync function publishSchedule(target){\r\n\tvar response\t= await FormSubmit.submitForm(target, 'events/publish-schedule');\r\n\r\n\tif(response){\r\n\t\tdocument.querySelectorAll('.schedule-actions .loader-wrapper').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\r\n\t\tdocument.querySelectorAll('.schedule.publish.warning').forEach(el=>el.remove());\r\n\t\t\r\n\t}\r\n}\r\n\r\n// Removes an existing schedule\r\nasync function removeSchedule(target){\r\n\tvar scheduleId\t\t= target.dataset[\"schedule_id\"];\r\n\tvar text \t\t\t= \"Are you sure you want to remove this schedule\";\r\n\tvar formData \t\t= new FormData();\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tvar confirmed\t\t= await checkConfirmation(text, target.closest('.schedules-div'));\r\n\tif(confirmed){\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/remove_schedule', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\r\n\t\t\tdocument.querySelector('.schedules_wrapper .loader-wrapper:not(.hidden)').remove();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction removeRowSpan(cell){\r\n\tcell.removeAttribute('rowspan');\r\n\tlet row\t\t\t= cell.closest('tr').nextElementSibling;\r\n\tif(row != null){\r\n\t\tcell\t\t\t= row.cells[cell.cellIndex];\r\n\t\twhile(cell.matches('.hidden')){\r\n\t\t\tcell.classList.remove('hidden');\r\n\t\t\trow\t\t\t\t= row.nextElementSibling;\r\n\t\t\tcell\t\t\t= row.cells[cell.cellIndex];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet sessionId\t= form.querySelector('[name=\"session-id\"]').value;\r\n\tlet date\t\t= form.querySelector('[name=\"date\"]').value;\r\n\tlet startTime\t= form.querySelector('[name=\"starttime\"]').value;\r\n\tlet endTime\t\t= form.querySelector('[name=\"endtime\"]').value;\r\n\tlet newCell, table, newRow, newCol, cell, oldStartTime, oldDate, oldEndTime;\r\n\r\n\tcell\t\t\t= document.querySelector('td.active');\r\n\tif(cell == null){\r\n\t\treturn;\r\n\t}\r\n\r\n\tMain.showLoader(cell.firstChild);\r\n\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\ttable\t\t\t= cell.closest('table');\r\n\t\tnewCell\t= cell;\r\n\t\tnewRow\t= cell.closest('tr');\r\n\t\tnewCol\t= cell.cellIndex;\r\n\r\n\t\tif(sessionId != ''){\r\n\t\t\toldStartTime\t= cell.dataset.starttime;\r\n\t\t\toldEndTime\t\t= cell.dataset.endtime;\r\n\t\t\toldDate\t\t\t= table.rows[0].cells[1].dataset.isodate;\r\n\t\t\t\r\n\t\t\t// Adjust the table if date or times changed\r\n\t\t\tif(oldDate != date || oldStartTime != startTime || oldEndTime != endTime){\r\n\t\t\t\tremoveRowSpan(cell);\r\n\r\n\t\t\t\tif(oldDate != date || oldStartTime != startTime){\r\n\t\t\t\t\tcell.innerHTML\t= 'Available';\r\n\r\n\t\t\t\t\t// find the new cell\r\n\t\t\t\t\tnewRow\t= table.querySelector(`tr[data-starttime=\"${startTime}\"]`);\r\n\t\t\t\t\tnewCol\t= table.rows[0].querySelector(`[data-isodate=\"${date}\"]`).cellIndex;\r\n\t\t\t\t\tnewCell\t= newRow.cells[newCol];\r\n\r\n\t\t\t\t\t// make old cell a normall cell\r\n\t\t\t\t\tcell.classList.remove('ui-selected', 'active', 'selected');\r\n\r\n\t\t\t\t\t// make the new cell the active cell\r\n\t\t\t\t\tnewCell.classList.add('ui-selected', 'active', 'selected');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddHostHtml(response);\r\n\r\n\t\t// Get the new inserted cell\r\n\t\tcell\t= newRow.cells[newCol];\r\n\r\n\t\tapplyRowSpan(cell, cell.rowSpan);\r\n\r\n        addSelectable();\r\n\t}\r\n}\r\n\r\n// Show the modal to add a recipe keyword\r\nfunction showRecipeModal(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\t//Fill the modal with the values of the clickes schedule\r\n\tvar recipeModal \t= document.querySelector('[name=\"recipe_keyword_modal\"]');\r\n\r\n\tFormSubmit.formReset(recipeModal.querySelector('form'));\r\n\r\n\trecipeModal.querySelector('[name=\"schedule_id\"]').value \t= table.dataset[\"id\"];\r\n\trecipeModal.querySelector('[name=\"date\"]').value \t\t\t= date;\r\n\trecipeModal.querySelector('[name=\"starttime\"]').value \t\t= startTime;\r\n\r\n\tif(target.textContent != 'Enter recipe keyword'){\r\n\t\trecipeModal.querySelector('[name=\"recipe_keyword\"]').value\t= target.textContent;\r\n\t\tdocument.querySelector('[name=\"add_recipe_keyword\"]').textContent\t= 'Update recipe keywords';\r\n\t}\r\n\t\r\n\tMain.showModal(recipeModal);\r\n}\r\n\r\n//submit the recipe form\r\nasync function submitRecipe(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_menu');\r\n\r\n\tdocument.querySelector('.active').textContent\t= target.closest('form').querySelector('[name=\"recipe_keyword\"]').value;\r\n\r\n\tdocument.querySelector('.active').classList.remove('active');\r\n\r\n\tMain.hideModals();\r\n\r\n\tMain.displayMessage(response);\r\n}\r\n\r\nfunction showEditScheduleModal(target){\r\n\tlet modal\t\t= document.getElementById('edit-schedule_modal');\r\n\tlet wrapper\t\t= target.closest('.schedules-div');\r\n\tlet table\t\t= wrapper.querySelector('table.schedule');\r\n\r\n\tlet scheduleId\t= wrapper.dataset.id;\r\n\r\n\tmodal.querySelector(`[name=\"schedule_id\"]`).value\t\t= scheduleId;\r\n\tmodal.querySelector(`[name=\"target_id\"]`).value\t\t\t= table.dataset.target_id;\r\n\tmodal.querySelector(`[name=\"target_name\"]`).value\t\t= table.dataset.target;\r\n\tmodal.querySelector(`[name=\"schedule_info\"]`).value\t\t= wrapper.querySelector('.table-title.sub-title').textContent;\r\n\tmodal.querySelector(`[name=\"startdate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"enddate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[table.tHead.querySelector('tr').cells.length-1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"timeslotsize\"]`).value\t\t= wrapper.dataset.slotsize;\r\n\tif(wrapper.dataset.fixedslotsize == 1){\r\n\t\tmodal.querySelector(`[name='fixedtimeslotsize'][value='yes']`).checked = true;\r\n\t}else{\r\n\t\tmodal.querySelector(`[name='fixedtimeslotsize'][value='no']`).checked = true;\r\n\t}\r\n\tmodal.querySelector(`[name=\"subject\"]`).value\t\t\t= wrapper.dataset.subject;\r\n\tmodal.querySelector(`[name=\"hidenames\"]`).checked\t\t= wrapper.dataset.hidenames;\r\n\tmodal.querySelector(`[name=\"skiplunch\"]`).checked\t\t= parseInt(table.dataset.skiplunch);\r\n\tmodal.querySelector(`[name=\"skipdiner\"]`).checked\t\t= parseInt(table.dataset.skipdiner);\r\n\tmodal.querySelector(`[name=\"skiporientation\"]`).checked\t= table.rows.length<3;\r\n\r\n\tlet adminRoles\t= JSON.parse(table.dataset.adminroles);\r\n\tmodal.querySelectorAll(`[name=\"admin-roles[]\"] option`).forEach(option => option.selected = adminRoles.includes(option.value));\r\n\tmodal.querySelectorAll(`[name=\"admin-roles[]\"]`).forEach(select => select.dispatchEvent(new Event('change')));\r\n\r\n\tlet viewRoles\t= JSON.parse(table.dataset.viewroles);\r\n\r\n\tmodal.querySelectorAll(`[name=\"view-roles[]\"] option`).forEach(option => option.selected = viewRoles.includes(option.value));\r\n\tmodal.querySelectorAll(`[name=\"view-roles[]\"]`).forEach(select => select.dispatchEvent(new Event('change')));\r\n\r\n\tMain.showModal(modal);\r\n}\r\n\r\nasync function checkIfValidSelection(target, selected, e){\r\n\t//we have selected something and there are no open modals\r\n\tlet openModals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif((selected.length > 0 || target.classList.contains('orientation')) && (openModals == null || openModals.length == 0) ){\r\n\r\n\t\tlet firstCell;\r\n\t\tlet lastCell;\r\n\t\tif(selected.length > 0){\r\n\t\t\t//check if selection is valid\r\n\t\t\tlet columnNr\t= selected[0].node.cellIndex;\r\n\t\t\tfirstCell\t\t= selected[0].node;\r\n            lastCell\t\t= selected[selected.length-1].node;\r\n\r\n\t\t\tfor (const selection of selected){\r\n\t\t\t\tif(columnNr != selection.node.cellIndex){\r\n\t\t\t\t\tlet options = {\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\ttitle: \"You can not select times on multiple days!\",\r\n\t\t\t\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tSwal.fire(options);\r\n\r\n\t\t\t\t\te.target.closest('.sim-table')._selectable.clear();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfirstCell\t= target;\r\n\t\t\tlastCell\t= target;\r\n\t\t}\r\n\t\t\r\n\t\tfirstCell.dataset.oldvalue\t= firstCell.innerHTML;\r\n\r\n\t\t//We are dealing with a cell with a value\r\n\t\tif(firstCell.classList.contains('selected')){\r\n            let date    = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n            let dateStr = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.date;\r\n\r\n            firstCell.classList.add('active');\r\n\t\t\tlet result  = await editTimeSlot(firstCell, date, dateStr);\r\n            if(result){\r\n                deleteHost(firstCell);\r\n            }\r\n\t\t}else{\r\n            let rowCount\t\t= document.querySelectorAll('.ui-selected').length;\r\n            applyRowSpan(firstCell, rowCount);\r\n\r\n            // Only show loader when the cell is empty\r\n            if(!firstCell.matches('.selected')){\r\n                Main.showLoader(firstCell.firstChild);\r\n\t\t\t}\r\n\r\n            firstCell.classList.add('active');\r\n\r\n\t\t\tshowTimeslotModal(selected);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function deleteHost(target){\r\n    let cell    = target.closest('td');\r\n    let classes = cell.classList.value;\r\n    let index   = cell.cellIndex;\r\n    let row     = cell.closest('tr');\r\n    let dateStr = cell.closest('table').rows[0].cells[cell.cellIndex].dataset.date;\r\n\r\n    let result  = await removeHost(cell, dateStr);\r\n\r\n    if(result){\r\n        cell.outerHTML   \t\t= result;\r\n\r\n        cell                    = row.cells[index];\r\n\t\tremoveRowSpan(cell);\r\n    }\r\n}\r\n\r\n//Do something with selected items\r\nasync function afterSelect(e, selected, _unselected){\r\n\tlet target;\r\n\tif(selected[0] != undefined){\r\n\t\ttarget \t= selected[0].node;\r\n\t}else{\r\n\t\ttarget\t= e.target;\r\n\t}\r\n\r\n\t//remove a meal host\r\n\tif(target.matches('.meal.selected.own, .meal.selected.admin')){\r\n        deleteHost(target);\r\n\t//Add a host\r\n\t}else if(target.matches('.meal.admin')){\r\n        let table\t\t\t\t\t\t\t\t\t\t\t= target.closest('table');\r\n        let cell\t\t\t\t\t\t\t\t\t\t\t= target.closest('td');\r\n\t\tcell.classList.add('active');\r\n        let date\t\t\t\t\t\t\t\t\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.isodate;\r\n        let startTime\t\t\t\t\t\t\t\t\t\t= target.closest('tr').dataset.starttime;\r\n        \r\n\t\tshowAddHostModal(target, date, startTime);\r\n\t//orientation slot\r\n\t}else if(target.matches('.add-current:not(.selected, .admin)')){\r\n        let table\t\t= target.closest('table');\r\n\t\tlet cell\t\t= target.closest('td');\r\n\t\tlet dateStr\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\r\n        target.classList.add('active');\r\n\t\taddCurrentUserAsHost(target, dateStr);\r\n\t}else{\r\n\t\tcheckIfValidSelection(target, selected, e); \r\n\t}\r\n}\r\n\r\n//hide empty rows on mobile\r\nfunction hideRows() {\r\n\t//only run for smaller screens\r\n\tif (window.innerWidth > 800) return false;\r\n\t\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table tr').forEach(function(tr){\r\n\t\tvar emptyRow = true;\r\n\t\t\r\n\t\t//DO not hide lunch or dinner rows\r\n\t\tif(tr.dataset.starttime != 'dinner' && tr.dataset.starttime != 'lunch'){\r\n\t\t\t//loop over all table cells to see if there is a cell with content\r\n\t\t\ttr.querySelectorAll('td').forEach(function(cell,index){\r\n\t\t\t\tif(index>0 && cell.textContent != 'Available' && cell.textContent != ' '){\r\n\t\t\t\t\temptyRow = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//If non of the cells have content\r\n\t\t\tif(emptyRow ){\r\n\t\t\t\t//hide the row\r\n\t\t\t\ttr.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addSelectable(){\r\n\t//loop over all the schedule tables\r\n\tdocument.querySelectorAll('.sim-table.schedule').forEach(function(table){\r\n\t\t//Add selectable on non-mobile devices\r\n\t\tif(!Main.isMobileDevice() || table.rows.length < 7){\r\n\t\t\tif(table._selectable != undefined){\r\n\t\t\t\ttable._selectable.destroy();\r\n\t\t\t}\r\n\r\n\t\t\tlet options\t\t= {\r\n\t\t\t\tfilter:\t\t\".orientation.available\",\r\n\t\t\t\tappendTo:\ttable.querySelector(\"tbody\"),\r\n\t\t\t\tlasso: {\r\n\t\t\t\t\t border: \"none\",\r\n\t\t\t\t\t backgroundColor: \"none\"\r\n\t\t\t\t }\r\n\t\t\t}\r\n\r\n\t\t\t// only allow 1 timeslot if we have fixed timeslots\r\n\t\t\tif(table.closest('.schedules-div.table-wrapper').dataset.fixedslotsize == '1' ){\r\n\t\t\t\toptions.maxSelectable\t= 1;\r\n\t\t\t}\r\n\r\n\t\t\t//Load selectable and attach it to the table\r\n\t\t\ttable._selectable = new Selectable(options);\r\n\t\t\t\r\n\t\t\t//Run the function afterSelect when selection is final\r\n\t\t\ttable._selectable.on('end', afterSelect);\r\n\t\t}\r\n\t});\r\n\r\n\thideRows();\r\n}\r\n\r\nfunction modalclosed(ev){\r\n\tdocument.querySelectorAll('td.active').forEach(cell => {\r\n\t\tcell.innerHTML = cell.dataset.oldvalue;\r\n\t\tcell.classList.remove('active', 'ui-selected');\r\n\t});\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\t\r\n\taddSelectable();\r\n\r\n\tdocument.querySelector('[name=\"add_session\"]').addEventListener('modalclosed', modalclosed);\r\n});\r\n\r\ndocument.addEventListener('click', function(event){\r\n\tlet target = event.target;\r\n\r\n\tif(target.name == 'add_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\taddSchedule(target);\r\n\t}else if(target.name == 'publish-schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tpublishSchedule(target);\r\n\t}else if(target.name == 'add_recipe_keyword'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tsubmitRecipe(target);\r\n\t}else if(target.matches('.modal .close')  && target.closest('.modal').attributes.name.value == 'add_session'){\r\n\t\tremoveRowSpan(document.querySelector('td.active'));\r\n\t}else if(target.classList.contains('keyword')){\r\n\t\tshowRecipeModal(target);\r\n\t}else if(target.classList.contains('publish')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tShowPublishScheduleModal(target);\r\n\t}else if(target.classList.contains('remove_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tremoveSchedule(target);\r\n\t}else if(target.matches('.edit-schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tshowEditScheduleModal(target);\r\n\t}else if(target.name == 'add_host' || target.name == 'add_timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\tlet target = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name=='target_name'){\r\n\t\tvar userid = target.list.querySelector(`[value='${target.value}' i]`).dataset.value;\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"target_id\"]').value\t= userid;\r\n\t}else if(target.id == 'host'){\r\n\t\tlet host\t= target.list.querySelector(`[value=\"${target.value}\"]`);\r\n\t\tlet userId\t= '';\r\n\t\tif(host != null){\r\n\t\t\tuserId\t= host.dataset.userid;\r\n\t\t}\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"host_id\"]').value\t= userId;\r\n\t}\r\n\r\n\t/* if(target.matches('[name=\"add_session\"] .time')){\r\n\t\t// get the active cell\r\n\t\tlet cell\t\t= document.querySelector('td.active');\r\n\r\n\t\tif(cell == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet table\t\t= cell.closest('table');\r\n\r\n\t\t// validate the time\r\n\t\tif(\r\n\t\t\t(target.name == 'starttime' && table.querySelector(`tr[data-starttime=\"${target.value}\"]`) == null) ||\r\n\t\t\t(target.name == 'endtime' && table.querySelector(`tr[data-endtime=\"${target.value}\"]`) == null) \r\n\t\t){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet d\t\t\t= new Date();\r\n\t\tlet starttime\t= form.querySelector('[name=\"starttime\"]').value.split(':');\r\n\t\tstarttime\t\t= new Date(d.getFullYear(), 0, 1, starttime[0], starttime[1]);\r\n\t\tlet endtime\t\t= form.querySelector('[name=\"endtime\"]').value.split(':');\r\n\t\tendtime\t\t\t= new Date(d.getFullYear(), 0, 1, endtime[0], endtime[1]);\r\n\t\t// calculate the quarters between end and starttime\r\n\t\tlet rowSpan\t\t= (endtime-starttime)/1000/60/15\r\n\r\n\t\t// starttime changed\r\n\t\tif(starttime != target.value){\r\n\t\t\t// adjust the current cell\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\t\t\tcell.classList.remove('ui-selected', 'active');\r\n\r\n\t\t\t// find the new cell\r\n\t\t\tlet newRow\t= cell.closest('table').querySelector('tr[data-starttime=\"'+form.querySelector('[name=\"starttime\"]').value+'\"]');\r\n\t\t\tlet newCell\t= newRow.cells[cell.cellIndex];\r\n\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\t\t\tnewCell.classList.add('ui-selected', 'active');\r\n\t\t\tapplyRowSpan(newCell, rowSpan);\r\n\t\t// endtime changed\r\n\t\t}else{\r\n\t\t\tapplyRowSpan(cell, rowSpan);\r\n\t\t}\r\n\t} */\r\n});"],"names":["addHostHtml","response","target","document","querySelector","classList","remove","outerHTML","html","Main","displayMessage","message","hideModals","showTimeslotModal","selected","reminders","firstCell","lastCell","date","startTime","endTime","hostId","subject","location","hostName","sessionId","atendees","li","modal","ul","querySelectorAll","forEach","el","value","innerHTML","undefined","dataset","starttime","endtime","node","length","applyRowSpan","matches","showLoader","firstChild","closest","id","table","isodate","rows","cells","cellIndex","host_id","host","session_id","JSON","parse","includes","checked","add","fixedslotsize","textContent","disabled","atendee","createElement","name","appendChild","showModal","async","checkConfirmation","text","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","fullscreenElement","Swal","fire","isConfirmed","count","row","index","i","nextElementSibling","rowSpan","removeRowSpan","cell","removeAttribute","deleteHost","dateStr","result","confirmed","scheduleOwner","contains","formData","FormData","append","FormSubmit","fetchRestApi","removeHost","afterSelect","e","_unselected","showAddHostModal","heading","scheduleId","tHead","sim","userId","loadHostFormdata","addCurrentUserAsHost","openModals","columnNr","selection","_selectable","clear","oldvalue","showDenyButton","denyButtonText","answer","isDenied","editTimeSlot","checkIfValidSelection","addSelectable","isMobileDevice","destroy","filter","appendTo","lasso","border","backgroundColor","maxSelectable","Selectable","on","window","innerWidth","tr","emptyRow","hideRows","modalclosed","ev","console","log","addEventListener","event","stopPropagation","submitForm","addSchedule","publishSchedule","submitRecipe","attributes","recipeModal","formReset","showRecipeModal","click","ShowPublishScheduleModal","removeSchedule","getElementById","wrapper","target_id","slotsize","hidenames","parseInt","skiplunch","skipdiner","adminRoles","adminroles","option","select","dispatchEvent","Event","viewRoles","viewroles","showEditScheduleModal","newCell","newRow","newCol","oldStartTime","oldDate","oldEndTime","form","addHost","userid","list"],"sourceRoot":""}